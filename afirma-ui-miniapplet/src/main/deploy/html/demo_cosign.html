
<html> <!-- Ejemplo básico de lanzador de la aplicación -->
	<head>
		<script type="text/javascript" src="http://www.java.com/js/deployJava.js"></script>
		<script type="text/javascript" src="instalador.js"></script>
		<script type="text/javascript" src="constantes.js"></script>
		<script type="text/javascript">
			function coSign() {
				try {
				
					var sign = clienteFirma.getFileContent("Seleccione el fichero de firma", null, null);
					if (sign == null) {
						return;
					}
				
					var signature = clienteFirma.coSign(
						sign,
						clienteFirma.getFileContent("Seleccione si procede el fichero de datos original", null, null),
						//document.getElementById("algorithm").value,
						"MD5withRSA",
						document.getElementById("format").value,
						document.getElementById("params").value);
				
					clienteFirma.saveDataToFile(
						signature,
						"Guardar la cofirma generada",
						null,
						null,
						null);
				
				} catch(e) {
					showLog(clienteFirma.getErrorMessage());
				}
			}
			
			function addExtraParam(extraParam) {
				var paramsList = document.getElementById("params");
				paramsList.value = paramsList.value + extraParam + "\n";
				document.getElementById('newParam').value = "";
			}
			
			function showLog(newLog) {
				document.getElementById('console').value = document.getElementById('console').value + "\n" + newLog;
			}
		</script>
	</head>
	<body>
		<script type="text/javascript">
			cargarMiniApplet();
		</script>
		<p>Cargamos el MiniApplet</p>
		
		<div>
		<label for="format">Formato</label>
		<select id="format">
		<option value="CAdES">CAdES</option>
		</select>
		</div>
		
		<div>
		<label for="algorithm">Algoritmo</label>
		<select id="algorithm">
		<option value="SHA1withRSA">SHA1 con RSA</option>
		</select>
		</div>
		
		<div>
		<label for="newParam">ExtraParmas</label>
		<input id="newParam" type="text" /><input type="button" value="Agregar" onclick="addExtraParam(document.getElementById('newParam').value);" />
		<br/>
		<textarea id="params" cols="50" rows="5" readonly></textarea>
		</div>
		
		<input type="button" value="Cofirmar" onclick="coSign();" />
		
		<div>
		<span>Consola</span>
		<textarea id="console" cols="150" rows="10">
		</textarea>
		</div>
	</body>
</html>	